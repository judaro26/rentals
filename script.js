const properties = {
  stockton: {
    main: {
      title: { en: "Main House", es: "Casa Principal" },
      description: { en: "2 Bed / 1 Bath - $1950/mo", es: "2 Habitaciones / 1 Baño - $1950/mes" },
      images: [
        {
          src: 'images/main1.jpg',
          en: "Main House - 2 Bed / 1 Bath - $1950/mo",
          es: "Casa Principal - 2 Habitaciones / 1 Baños - $1950/mes"
        },
        {
          src: 'images/main2.jpg',
          en: "Main House - 2 Bed / 1 Bath - $1950/mo",
          es: "Casa Principal - 2 Habitaciones / 1 Baños - $1950/mes"
        },
        {
          src: 'images/main3.jpg',
          en: "Main House - 2 Bed / 1 Bath - $1950/mo",
          es: "Casa Principal - 2 Habitaciones / 1 Baños - $1950/mes"
        },
        {
          src: 'images/main4.jpg',
          en: "Main House - 2 Bed / 1 Bath - $1950/mo",
          es: "Casa Principal - 2 Habitaciones / 1 Baños - $1950/mes"
        },
        {
          src: 'images/main5.jpg',
          en: "Main House - 2 Bed / 1 Bath - $1950/mo",
          es: "Casa Principal - 2 Habitaciones / 1 Baños - $1950/mes"
        },
        {
          src: 'images/main6.jpg',
          en: "Main House - 2 Bed / 1 Bath - $1950/mo",
          es: "Casa Principal - 2 Habitaciones / 1 Baños - $1950/mes"
        },
        {
          src: 'images/main7.jpg',
          en: "Main House - 2 Bed / 1 Bath - $1950/mo",
          es: "Casa Principal - 2 Habitaciones / 1 Baños - $1950/mes"
        },
        {
          src: 'images/main8.jpg',
          en: "Main House - 2 Bed / 1 Bath - $1950/mo",
          es: "Casa Principal - 2 Habitaciones / 1 Baños - $1950/mes"
        },
        {
          src: 'images/main9.jpg',
          en: "Main House - 2 Bed / 1 Bath - $1950/mo",
          es: "Casa Principal - 2 Habitaciones / 1 Baños - $1950/mes"
        },
        {
          src: 'images/main10.jpg',
          en: "Main House - 2 Bed / 1 Bath - $1950/mo",
          es: "Casa Principal - 2 Habitaciones / 1 Baños - $1950/mes"
        }
      ]
    },
    studio: {
      title: { en: "Studio", es: "Estudio" },
      description: { en: "1 Bed / 1 Bath - $950/mo", es: "1 Habitación / 1 Baño - $950/mes" },
      images: [
        {
          src: 'images/studio1.jpg',
          en: "Studio - 1 Bed / 1 Bath - $950/mo",
          es: "Estudio - 1 Habitación / 1 Baño - $950/mes"
        },
        {
          src: 'images/studio2.jpg',
          en: "Studio - 1 Bed / 1 Bath - $950/mo",
          es: "Estudio - 1 Habitación / 1 Baño - $950/mes"
        },
        {
          src: 'images/studio3.jpg',
          en: "Studio - 1 Bed / 1 Bath - $950/mo",
          es: "Estudio - 1 Habitación / 1 Baño - $950/mes"
        },
        {
          src: 'images/studio4.jpg',
          en: "Studio - 1 Bed / 1 Bath - $950/mo",
          es: "Estudio - 1 Habitación / 1 Baño - $950/mes"
        },
        {
          src: 'images/studio5.jpg',
          en: "Studio - 1 Bed / 1 Bath - $950/mo",
          es: "Estudio - 1 Habitación / 1 Baño - $950/mes"
        },
        {
          src: 'images/studio6.jpg',
          en: "Studio - 1 Bed / 1 Bath - $950/mo",
          es: "Estudio - 1 Habitación / 1 Baño - $950/mes"
        },
        {
          src: 'images/studio7.jpg',
          en: "Studio - 1 Bed / 1 Bath - $950/mo",
          es: "Estudio - 1 Habitación / 1 Baño - $950/mes"
        },
        {
          src: 'images/studio8.jpg',
          en: "Studio - 1 Bed / 1 Bath - $950/mo",
          es: "Estudio - 1 Habitación / 1 Baño - $950/mes"
        },
        {
          src: 'images/studio9.jpg',
          en: "Studio - 1 Bed / 1 Bath - $950/mo",
          es: "Estudio - 1 Habitación / 1 Baño - $950/mes"
        },
        {
          src: 'images/studio10.jpg',
          en: "Studio - 1 Bed / 1 Bath - $950/mo",
          es: "Estudio - 1 Habitación / 1 Baño - $950/mes"
        }
      ]
    }
  },
  fairfield: {
    apartment: {
      title: { en: "Fairfield Home", es: "Casa en Fairfield" },
      description: { en: "3 Bed / 2 Bath - $2500/mo", es: "3 Habitaciones / 2 Baños - $2500/mes" },
      images: [
        { src: 'images/fairfield/fairfield.jpg', en: "3 Bed / 2 Bath - $2500/mo", es: "3 Habitaciones / 2 Baños - $2500/mes" },
        { src: 'images/fairfield/fairfield2.jpg', en: "3 Bed / 2 Bath - $2500/mo", es: "3 Habitaciones / 2 Baños - $2500/mes" },
        { src: 'images/fairfield/fairfield3.jpg', en: "3 Bed / 2 Bath - $2500/mo", es: "3 Habitaciones / 2 Baños - $2500/mes" },
        { src: 'images/fairfield/fairfield4.jpg', en: "3 Bed / 2 Bath - $2500/mo", es: "3 Habitaciones / 2 Baños - $2500/mes" },
        { src: 'images/fairfield/fairfield5.jpg', en: "3 Bed / 2 Bath - $2500/mo", es: "3 Habitaciones / 2 Baños - $2500/mes" },
        { src: 'images/fairfield/fairfield6.jpg', en: "3 Bed / 2 Bath - $2500/mo", es: "3 Habitaciones / 2 Baños - $2500/mes" },
        { src: 'images/fairfield/fairfield7.jpg', en: "3 Bed / 2 Bath - $2500/mo", es: "3 Habitaciones / 2 Baños - $2500/mes" },
        { src: 'images/fairfield/fairfield8.jpg', en: "3 Bed / 2 Bath - $2500/mo", es: "3 Habitaciones / 2 Baños - $2500/mes" },
        { src: 'images/fairfield/fairfield9.jpg', en: "3 Bed / 2 Bath - $2500/mo", es: "3 Habitaciones / 2 Baños - $2500/mes" },
        { src: 'images/fairfield/fairfield10.jpg', en: "3 Bed / 2 Bath - $2500/mo", es: "3 Habitaciones / 2 Baños - $2500/mes" },
        { src: 'images/fairfield/fairfield11.jpg', en: "3 Bed / 2 Bath - $2500/mo", es: "3 Habitaciones / 2 Baños - $2500/mes" },
        { src: 'images/fairfield/fairfield12.jpg', en: "3 Bed / 2 Bath - $2500/mo", es: "3 Habitaciones / 2 Baños - $2500/mes" },
        { src: 'images/fairfield/fairfield13.jpg', en: "3 Bed / 2 Bath - $2500/mo", es: "3 Habitaciones / 2 Baños - $2500/mes" },
        { src: 'images/fairfield/fairfield14.jpg', en: "3 Bed / 2 Bath - $2500/mo", es: "3 Habitaciones / 2 Baños - $2500/mes" },

        { src: 'images/fairfield/fairfield15.jpg', en: "3 Bed / 2 Bath - $2500/mo", es: "3 Habitaciones / 2 Baños - $2500/mes" }
      ]
    }
  }
};
// State variables
let currentLocation = null;
let language = localStorage.getItem("lang") || 'en';
let currentSlide = 0;
let currentProperty = null;
// Initialize the page
window.onload = () => {
  initializePage();
};
function initializePage() {
  // Hide all sections initially
  document.querySelectorAll('section').forEach(sec => {
    sec.classList.add('hidden');
  });
  document.getElementById("languageModal").style.display = "none";
  // Check if language is set
  if (!localStorage.getItem("lang")) {
    showLanguageModal();
  } else {
    showLocationScreen();
  }
}
function showLanguageModal() {
  document.querySelectorAll('section').forEach(sec => {
    sec.classList.add('hidden');
  });
  document.getElementById("languageModal").style.display = "flex";
}
function showLocationScreen() {
  document.querySelectorAll('section').forEach(sec => {
    sec.classList.add('hidden');
  });
  document.getElementById("languageModal").style.display = "none";
  document.getElementById("locationScreen").classList.remove("hidden");
  updateLabels();
}
function setLanguage(lang) {
  language = lang;
  localStorage.setItem("lang", lang);
  updateLabels(); // This will update the form too
  showLocationScreen();
}
function selectLocation(location) {
  currentLocation = location;
  document.getElementById("locationScreen").classList.add("hidden");
  if (location === 'stockton') {
    document.getElementById("promptScreen").querySelector("#promptTitle").textContent = language === 'es' ? "¿Qué te gustaría hacer?" : "What would you like to do?";
    document.getElementById("promptScreen").classList.remove("hidden");
    // Update the action buttons for Stockton
    const actionButtons = document.getElementById("promptScreen").querySelector(".action-buttons");
    actionButtons.innerHTML = `
      <button id="viewImagesBtn" class="action-btn" onclick="goToGallery()">
        <i class="fas fa-images"></i> ${language === 'es' ? 'Ver Imágenes' : 'View Images'}
      </button>
      <button id="applyNowBtn" class="action-btn" onclick="goToApplication()">
        <i class="fas fa-file-signature"></i> ${language === 'es' ? 'Aplicar para Propiedad' : 'Apply for Property'}
      </button>
    `;
    const backBtnPrompt = document.getElementById("promptScreen").querySelector(".back-btn");
    if (backBtnPrompt) {
      backBtnPrompt.onclick = goBack; // Use the general goBack function
    }
  } else if (location === 'fairfield') {
    document.getElementById("promptScreen").querySelector("#promptTitle").textContent = language === 'es' ? "¿Qué te gustaría hacer en Fairfield?" : "What would you like to do in Fairfield?";
    document.getElementById("promptScreen").classList.remove("hidden");
    // Update the action buttons for Fairfield
    const actionButtons = document.getElementById("promptScreen").querySelector(".action-buttons");
    actionButtons.innerHTML = `
      <button class="action-btn" onclick="showPropertiesForLocation('${location}')">
        <i class="fas fa-images"></i> ${language === 'es' ? 'Ver Propiedades' : 'View Properties'}
      </button>
      <button class="action-btn" onclick="applyForProperty('${location}', 'apartment')">
        <i class="fas fa-file-signature"></i> ${language === 'es' ? 'Aplicar para Propiedad' : 'Apply for Property'}
      </button>
    `;
    const backBtnPrompt = document.getElementById("promptScreen").querySelector(".back-btn");
    if (backBtnPrompt) {
      backBtnPrompt.onclick = goBack; // Use the general goBack function
    }
  }
  updateLabels();
}
// Modify goBack function to handle navigation from the prompt screen correctly
function goBack() {
  document.getElementById('promptScreen').classList.add('hidden');
  document.getElementById('locationScreen').classList.remove('hidden');
}

function showPropertiesForLocation(location) {
  let propertiesScreen = document.getElementById("dynamicPropertiesScreen");
  if (!propertiesScreen) {
    propertiesScreen = document.createElement('div');
    propertiesScreen.id = 'dynamicPropertiesScreen';
    propertiesScreen.classList.add('hidden');
    document.body.appendChild(propertiesScreen);
  }
  propertiesScreen.innerHTML = `
    <div class="container">
      <h2>${language === 'es' ? 'Propiedades en' : 'Properties in'} ${location.charAt(0).toUpperCase() + location.slice(1)}</h2>
      <div class="property-cards" id="${location}Properties"></div>
      <button class="back-btn" onclick="goBackToLocation()">
        <i class="fas fa-arrow-left"></i> ${language === 'es' ? 'Atrás' : 'Back'}
      </button>
    </div>
  `;
  const propertiesGrid = document.getElementById(`${location}Properties`); // Moved this line down
  const locationProperties = properties[location];
  for (const [propertyId, property] of Object.entries(locationProperties)) {
    const propertyCard = document.createElement('div');
    propertyCard.className = 'property-card';
    propertyCard.innerHTML = `
      <div class="property-img" style="background-image: url('${property.images[0].src}');"></div>
      <div class="property-info">
        <h3>${property.title[language]}</h3>
        <p>${property.description[language]}</p>
        <div class="property-actions">
          <button class="view-btn" onclick="viewPropertyGallery('${location}', '${propertyId}')">
            <i class="fas fa-images"></i> ${language === 'es' ? 'Ver Imágenes' : 'View Images'}
          </button>
          <button class="apply-btn" onclick="applyForProperty('${location}', '${propertyId}')">
            <i class="fas fa-file-signature"></i> ${language === 'es' ? 'Aplicar' : 'Apply'}
          </button>
        </div>
      </div>
    `;
    propertiesGrid.appendChild(propertyCard);
  }
  propertiesScreen.classList.remove('hidden');
}

function viewPropertyGallery(location, propertyId) {
  console.group('View Gallery Debug');
  console.log('Location:', location);
  console.log('Property ID:', propertyId);
  // Validate inputs
  if (!location || !propertyId) {
    console.error('Missing location or propertyId');
    console.groupEnd();
    return;
  }
  // Validate property exists
  if (!properties[location]) {
    console.error('Location not found:', location);
    console.groupEnd();
    return;
  }
  if (!properties[location][propertyId]) {
    console.error('Property not found:', propertyId, 'in', location);
    console.error('Available properties:', Object.keys(properties[location]));
    console.groupEnd();
    return;
  }
  // Update state
  currentLocation = location;
  currentProperty = propertyId;
  currentSlide = 0;
  console.log('Current property set to:', currentProperty);
  console.log('Property data:', properties[location][propertyId]);
  // Hide all sections
  document.querySelectorAll('section').forEach(section => {
    section.classList.add('hidden');
  });
  // Show slideshow
  const slideshow = document.getElementById("slideshow");
  if (!slideshow) {
    console.error('Slideshow element not found');
    console.groupEnd();
    return;
  }
  // Load first slide
  showSlide(location, propertyId);
  slideshow.classList.remove("hidden");
  console.log('Gallery shown successfully');
  console.groupEnd();
}
function showSlide(location, propertyId) {
  console.log('Showing slide for:', location, propertyId);
  const container = document.getElementById("slidesContainer");
  if (!container) {
    console.error('Slides container not found');
    return;
  }
  const property = properties[location]?.[propertyId];
  if (!property) {
    console.error('Property data not found');
    return;
  }
  const slide = property.images[currentSlide];
  if (!slide) {
    console.error('Slide data not found');
    return;
  }
  container.innerHTML = `
    <img src="${slide.src}" alt="${slide[language]}" onerror="this.onerror=null;this.src='images/placeholder.jpg'">
    <div class="caption">${property.title[language]} - ${slide[language]}</div>
    <div class="slide-nav">
      ${
        currentSlide > 0 ? `<button onclick="prevSlide()"><i class="fas fa-chevron-left"></i> ${language === 'es' ? 'Anterior' : 'Previous'}</button>` : ''
      }
      <span class="slide-counter">${currentSlide + 1} / ${property.images.length}</span>
      ${
        currentSlide < property.images.length - 1
          ? `<button onclick="nextSlide()"><i class="fas fa-chevron-right"></i> ${language === 'es' ? 'Siguiente' : 'Next'}</button>`
          : ''
      }
    </div>
    <button class="back-btn" onclick="goBackFromSlideshow()">
      <i class="fas fa-arrow-left"></i> ${language === 'es' ? 'Volver a propiedades' : 'Back to properties'}
    </button>
  `;
}
function nextSlide() {
  const property = properties[currentLocation][currentProperty];
  if (currentSlide < property.images.length - 1) {
    currentSlide++;
    showSlide(currentLocation, currentProperty);
  }
}
function prevSlide() {
  if (currentSlide > 0) {
    currentSlide--;
    showSlide(currentLocation, currentProperty);
  }
}
function applyForProperty(location, propertyId) {
  currentProperty = propertyId;
  document.getElementById("dynamicPropertiesScreen")?.classList.add("hidden");
  document.getElementById("applicationForm").classList.remove("hidden");
  updateLabels();
}
// Navigation functions
function goBackToLocation() {
  console.log('Going back to location selection'); // Debug
  // Hide the properties screen
  const propertiesScreen = document.getElementById("dynamicPropertiesScreen");
  if (propertiesScreen) {
    propertiesScreen.classList.add("hidden");
  } else {
    console.error("Properties screen not found");
  }
  // Show the location selection screen
  const locationScreen = document.getElementById("locationScreen");
  if (locationScreen) {
    locationScreen.classList.remove("hidden");
  } else {
    console.error("Location screen not found");
  }
  // For Stockton specifically, we need to handle differently
  if (currentLocation === 'stockton') {
    const mainPage = document.getElementById("mainPage");
    if (mainPage) {
      mainPage.classList.add("hidden");
    }

    const promptScreen = document.getElementById("promptScreen");
    if (promptScreen) {
      promptScreen.classList.remove("hidden");
    }
  }
}
function goBackFromSlideshow() {
  // Debugging info
  console.group('Back from slideshow');
  console.log('Current location:', currentLocation);
  // 1. Hide slideshow
  const slideshow = document.getElementById("slideshow");
  if (!slideshow) {
    console.error('Slideshow element not found!');
    console.groupEnd();
    return;
  }
  slideshow.classList.add("hidden");
  // 2. Show previous screen based on location
  let previousScreen = null;
  if (currentLocation === 'stockton') {
    previousScreen = document.getElementById("mainPage");
    console.log('For Stockton - showing main page');
  } else {
    previousScreen = document.getElementById("dynamicPropertiesScreen");
    console.log('For other locations - showing dynamic screen');
  }
  if (!previousScreen) {
    console.error('Previous screen element not found!');
    console.groupEnd();
    return;
  }
  previousScreen.classList.remove("hidden");
  console.log('Successfully showed previous screen');
  console.groupEnd();
}
function goBackToLanguage() {
  document.getElementById("locationScreen").classList.add("hidden");
  document.getElementById("languageModal").style.display = "flex";
}
// Stockton-specific functions
function goToGallery() {
  // Hide prompt screen
  document.getElementById('promptScreen').classList.add('hidden');
  // Show properties screen for Stockton
  const mainPage = document.getElementById('mainPage');
  if (mainPage) {
    mainPage.classList.remove('hidden');
    // Update the back button in mainPage to go back to prompt
    const backBtn = mainPage.querySelector('.back-btn');
    if (backBtn) {
      backBtn.onclick = goBackToPrompt;
    }
  }
  updateLabels();
}
function goBackToPrompt() {
  document.getElementById('mainPage').classList.add('hidden');
  document.getElementById('promptScreen').classList.remove('hidden');
}
function goToApplication(location = currentLocation, propertyId = currentProperty) {
  document.getElementById("promptScreen").classList.add("hidden");
  document.getElementById("applicationForm").classList.remove("hidden");
  document.getElementById("propertyLocation").value = location; // Set hidden location field
  document.getElementById("propertyType").value = propertyId; // Set hidden property type
  document.getElementById("formLanguage").value = language; // Set hidden language field
  updateLabels();
}
function showPromptScreen() {
  document.querySelectorAll('section').forEach(sec => {
    sec.classList.add('hidden');
  });
  document.getElementById("promptScreen").classList.remove("hidden");
  updateLabels();
}
// Update all labels based on current language
function updateLabels() {
  const translations = {
    en: {
      locationTitle: "Select Location",
      stockton: "Stockton, CA",
      fairfield: "Fairfield, CA",
      promptTitle: "What would you like to do?",
      viewImages: "View Images",
      applyNow: "Apply Now",
      formTitle: "Rental Application",
      fullName: "Full Name",
      email: "Email Address",
      phone: "Phone Number",
      employer: "Current Employer",
      jobTitle: "Job Title",
      income: "Monthly Income",
      submitBtn: "Submit Application",
      personalInfoTitle: "Personal Information",
      firstName: "First Name",
      lastName: "Last Name",
      dob: "Date of Birth",
      ssn: "SSN (Last 4 Digits)",
      email: "Email Address",
      phone: "Phone Number",
      currentAddress: "Current Address",
      currentRent: "Current Rent Amount",
      moveInDate: "Desired Move-In Date",
      employmentTitle: "Employment Information",
      employerName: "Current Employer",
      jobTitle: "Job Title",
      employmentDuration: "Duration of Employment",
      employerAddress: "Employer Address",
      supervisorName: "Supervisor Name",
      supervisorPhone: "Supervisor Phone",
      monthlyIncome: "Gross Monthly Income",
      incomeProofLabel: "Proof of Income",
      payStubs: "Pay Stubs (Last 2 Months)",
      bankStatements: "Bank Statements",
      taxReturns: "Tax Returns",
      rentalHistoryTitle: "Rental History",
      previousLandlord: "Previous Landlord Name",
      previousLandlordPhone: "Landlord Phone",
      previousRent: "Previous Rent Amount",
      reasonForLeaving: "Reason for Leaving",
      evictionLabel: "Have you ever been evicted?",
      evictionYes: "Yes",
      evictionNo: "No",
      vehicleTitle: "Vehicle Information",
      make: "Make",
      model: "Model",
      year: "Year",
      licensePlate: "License Plate",
      emergencyContactTitle: "Emergency Contact",
      emergencyName: "Full Name",
      emergencyRelation: "Relationship",
      emergencyPhone: "Phone Number",
      emergencyEmail: "Email",
      additionalInfoTitle: "Additional Information",
      occupants: "Number of Occupants",
      petsLabel: "Will you have pets?",
      petsYes: "Yes",
      petsNo: "No",
      petDescription: "Pet Description (Type, Breed, Weight)",
      smokingLabel: "Do you smoke?",
      smokingYes: "Yes",
      smokingNo: "No",
      additionalInfo: "Additional Comments",
      termsTitle: "Terms & Conditions",
      creditCheck: "I authorize a credit/background check (Fee may apply)",
      termsAgreement: "I certify that all information provided is true and complete",
      stocktonDisclosure: "I acknowledge I have received the City of Stockton Tenant Rights information"
    },
    es: {
      locationTitle: "Seleccione Ubicación",
      stockton: "Stockton, CA",
      fairfield: "Fairfield, CA",
      promptTitle: "¿Qué te gustaría hacer?",
      viewImages: "Ver Imágenes",
      applyNow: "Aplicar Ahora",
      formTitle: "Solicitud de Alquiler",
      fullName: "Nombre Completo",
      email: "Correo Electrónico",
      phone: "Número de Teléfono",
      employer: "Empleador Actual",
      jobTitle: "Título del Trabajo",
      income: "Ingresos Mensuales",
      submitBtn: "Enviar Solicitud",
      personalInfoTitle: "Información Personal",
      firstName: "Nombre",
      lastName: "Apellido",
      dob: "Fecha de Nacimiento",
      ssn: "SSN (Últimos 4 Dígitos)",
      email: "Correo Electrónico",
      phone: "Número de Teléfono",
      currentAddress: "Dirección Actual",
      currentRent: "Monto de Renta Actual",
      moveInDate: "Fecha Deseada de Mudanza",
      employmentTitle: "Información de Empleo",
      employerName: "Empleador Actual",
      jobTitle: "Puesto de Trabajo",
      employmentDuration: "Duración del Empleo",
      employerAddress: "Dirección del Empleador",
      supervisorName: "Nombre del Supervisor",
      supervisorPhone: "Teléfono del Supervisor",
      monthlyIncome: "Ingresos Mensuales Brutos",
      incomeProofLabel: "Comprobante de Ingresos",
      payStubs: "Recibos de Pago (Últimos 2 Meses)",
      bankStatements: "Estados de Cuenta Bancarios",
      taxReturns: "Declaraciones de Impuestos",
      rentalHistoryTitle: "Historial de Renta",
      previousLandlord: "Nombre del Propietario Anterior",
      previousLandlordPhone: "Teléfono del Propietario",
      previousRent: "Monto de Renta Anterior",
      reasonForLeaving: "Razón para Mudarse",
      evictionLabel: "¿Ha sido desalojado alguna vez?",
      evictionYes: "Sí",
      evictionNo: "No",
      vehicleTitle: "Información del Vehículo",
      make: "Marca",
      model: "Modelo",
      year: "Año",
      licensePlate: "Placa de Matrícula",
      emergencyContactTitle: "Contacto de Emergencia",
      emergencyName: "Nombre Completo",
      emergencyRelation: "Relación",
      emergencyPhone: "Número de Teléfono",
      emergencyEmail: "Correo Electrónico",
      additionalInfoTitle: "Información Adicional",
      occupants: "Número de Ocupantes",
      petsLabel: "¿Tendrá mascotas?",
      petsYes: "Sí",
      petsNo: "No",
      petDescription: "Descripción de la Mascota (Tipo, Raza, Peso)",
      smokingLabel: "¿Fuma?",
      smokingYes: "Sí",
      smokingNo: "No",
      additionalInfo: "Comentarios Adicionales",
      termsTitle: "Términos y Condiciones",
      creditCheck: "Autorizo una verificación de crédito/antecedentes (Puede aplicar una tarifa)",
      termsAgreement: "Certifico que toda la información proporcionada es verdadera y completa",
      stocktonDisclosure: "Reconozco que he recibido la información sobre los Derechos del Inquilino de la Ciudad de Stockton"
    }
  };
  // Apply translations
  const lang = translations[language] || translations.en;
  // Update all elements
  for (const [key, value] of Object.entries(lang)) {
    const elements = document.querySelectorAll(`[id="${key}"], [data-translate="${key}"]`);
    elements.forEach(el => {
      if (el.tagName === 'INPUT' && el.type !== 'submit' && el.type !== 'checkbox' && el.type !== 'radio') {
        el.placeholder = value;
      } else if (el.tagName === 'LABEL' || el.tagName === 'SPAN' || el.tagName === 'P' || el.tagName === 'H3' || el.tagName === 'LEGEND') {
        el.textContent = value;
      }
    });
  }
  // Update checkboxes and radio buttons
  document.querySelectorAll('[data-translate]').forEach(el => {
    const key = el.getAttribute('data-translate');
    if (lang[key]) {
      if (el.tagName === 'INPUT' && (el.type === 'checkbox' || el.type === 'radio')) {
        el.nextElementSibling.textContent = lang[key];
      } else if (el.tagName === 'OPTION') {
        el.textContent = lang[key];
      }
    }
  });
}
// Form handling
document.addEventListener('DOMContentLoaded', function() {
  const form = document.getElementById('rentalApplication');
  if (form) {
    form.addEventListener('submit', function(e) {
      e.preventDefault();

      alert(
        language === 'es'
          ? 'Solicitud enviada con éxito. Nos pondremos en contacto con usted pronto.'
          : 'Application submitted successfully. We will contact you soon.'
      );

      this.reset();
      if (currentLocation === 'stockton') {
        showPromptScreen();
      } else {
        showPropertiesForLocation(currentLocation);
      }
    });
  }
  document.querySelectorAll('input[name="pets"]').forEach(radio => {
    radio.addEventListener('change', function() {
      document.getElementById('petDetails').style.display = this.value === 'yes' ? 'block' : 'none';
    });
  });
});
